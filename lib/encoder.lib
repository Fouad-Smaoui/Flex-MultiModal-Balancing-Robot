https://os.mbed.com/users/fgagey/code/encoder/#33cb3eaa8595
